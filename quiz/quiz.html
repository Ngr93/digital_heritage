<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Survive the Chicago Fire - Quiz</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 650px;
      margin: 40px auto;
      text-align: center;
    }

    h1 {
      color: #d42e00;
      font-size: 32px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
    }

    /* Fire animation */
    .fire {
      width: 45px;
      height: 45px;
      background-image: url('https://i.gifer.com/origin/72/72aa7e1e0b8beddeb18f0bc33bd4a14c_w200.gif');
      background-size: cover;
    }

    #scoreBox {
      font-size: 18px;
      margin-bottom: 20px;
      color: #333;
      font-weight: bold;
    }

    .question-box {
      margin-bottom: 25px;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
    }

    button {
      padding: 12px;
      margin: 8px 0;
      width: 100%;
      border-radius: 6px;
      cursor: pointer;
      border: 1px solid #999;
      background: white;
      font-size: 16px;
    }

    .correctBtn {
      background: #d4edda;
      border-color: #6cc27f;
    }

    .wrongBtn {
      background: #f8d7da;
      border-color: #e88a8a;
    }

    #feedback {
      margin-top: 15px;
      font-size: 18px;
    }

    #nextBtn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      background: #d42e00;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: none;
    }
  </style>
</head>

<body>

  <h1>
    <div class="fire"></div>
    Survive the Chicago Fire
    <div class="fire"></div>
  </h1>

  <div id="scoreBox">Score: 0 / 5</div>
  <div id="quiz"></div>
  <div id="feedback"></div>

  <button id="nextBtn" onclick="nextQuestion()">Next Question</button>

  <script>
    // âœ… UPDATED QUESTIONS (Aligned with your StoryMap content)
    const questions = [
      {
        question: "Which post-fire change most improved fire safety in Chicagoâ€™s rebuilding phase?",
        answers: [
          "Stricter building regulations and increased use of fire-resistant materials",
          "Replacing all streets with wooden sidewalks again",
          "Moving the entire city center outside the Loop",
          "Stopping all construction for 10 years"
        ],
        correct: 0,
        explanation: "After the fire, rebuilding encouraged stricter rules and more fire-resistant construction to reduce future risk."
      },
      {
        question: "Why is the Chicago River shown as a key environmental issue after the fire?",
        answers: [
          "It became unusable because it dried up completely",
          "It was mainly used for clean drinking water without problems",
          "It was a major pollution channel due to waste and sewage impacts",
          "It was permanently closed to transportation and trade"
        ],
        correct: 2,
        explanation: "The river is highlighted as an environmental challenge because pollution and waste management strongly affected public health."
      },
      {
        question: "What does the decrease in typhoid deaths over time mainly indicate in your Environment section?",
        answers: [
          "The success of improved sanitation and water management",
          "A sudden climate shift that removed diseases",
          "A ban on immigration into Chicago",
          "The fire eliminated all bacteria permanently"
        ],
        correct: 0,
        explanation: "Falling typhoid deaths are evidence of better sanitation systems and healthier urban infrastructure over time."
      },
      {
        question: "What is the main purpose of including the flipbook/comic element in the StoryMap?",
        answers: [
          "To replace all historical sources with fiction",
          "To explain key narratives (including myths and public perceptions) in an engaging format",
          "To show building materials through engineering calculations",
          "To present raw datasets without interpretation"
        ],
        correct: 1,
        explanation: "The flipbook/comic supports storytelling by translating historical narratives and myths into an accessible, engaging format."
      },
      {
        question: "Why does the StoryMap include a quiz/game section at the end?",
        answers: [
          "To collect usersâ€™ personal data for marketing",
          "To test advanced programming skills only",
          "To entertain without any connection to the content",
          "To reinforce learning by checking understanding of the StoryMapâ€™s key points"
        ],
        correct: 3,
        explanation: "The quiz/game is an edutainment part: it helps users review and remember the main concepts from the StoryMap."
      }
    ];

    let score = 0;
    let questionIndex = 0;

    const quizDiv = document.getElementById("quiz");
    const scoreBox = document.getElementById("scoreBox");
    const feedbackDiv = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");

    function updateScore() {
      scoreBox.textContent = `Score: ${score} / ${questions.length}`;
    }

    function showQuestion() {
      feedbackDiv.innerHTML = "";
      nextBtn.style.display = "none";
      quizDiv.innerHTML = "";

      const q = questions[questionIndex];

      const box = document.createElement("div");
      box.className = "question-box";

      const title = document.createElement("h3");
      title.textContent = q.question;
      box.appendChild(title);

      q.answers.forEach((answer, idx) => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.onclick = () => checkAnswer(idx, btn);
        box.appendChild(btn);
      });

      quizDiv.appendChild(box);
    }

    function checkAnswer(selected, buttonElement) {
      const q = questions[questionIndex];
      const correctIndex = q.correct;

      // Disable all answer buttons after user clicks one
      const buttons = quizDiv.getElementsByTagName("button");
      for (let b of buttons) b.disabled = true;

      if (selected === correctIndex) {
        score++;
        updateScore();
        feedbackDiv.innerHTML = `<p style="color:green;"><b>Very good!</b> You survived this step! ðŸ”¥</p>`;
        buttonElement.classList.add("correctBtn");
      } else {
        feedbackDiv.innerHTML = `
          <p style="color:red;">
            Incorrect! The correct answer is: <b>${q.answers[correctIndex]}</b><br>
            <i>${q.explanation}</i>
          </p>
        `;
        buttonElement.classList.add("wrongBtn");
      }

      nextBtn.style.display = "inline-block";
    }

    function nextQuestion() {
      questionIndex++;

      if (questionIndex < questions.length) {
        showQuestion();
      } else {
        quizDiv.innerHTML = "";
        nextBtn.style.display = "none";
        feedbackDiv.innerHTML = `<b>You finished the quiz! Final Score: ${score} / ${questions.length} ðŸ”¥</b>`;
      }
    }

    // Start
    updateScore();
    showQuestion();
  </script>

</body>
</html>

